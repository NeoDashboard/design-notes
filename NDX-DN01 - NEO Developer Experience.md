<!-- markdownlint-enable -->
# NDX-DN01 - NEO Developer Experience

- Author: Harry Pierson (harrypierson@ngd.neo.org)
- Status: Final Draft

## Abstract

This design note describes the goals and guiding principles of a world-class
experience for developers targeting the NEO platform. This note is intended to
be high level and aspirational. Further design notes will specify in detail how
individual capabilities will be implemented.

Note, design notes related to the NEO Developer Experience will be prefixed with
"NDX". For example, this design note is designated "NDX-DN01" to indicate "NEO
Developer Experience Design Note #1".

## Overview

> "Make the impossible possible, the possible easy, the easy elegant." - MoshÃ© Feldenkrais

The NEO platform needs broad adoption in order to deliver on the
[Smart Economy vision](https://docs.neo.org/docs/en-us/basic/whitepaper.html#fb560064)
outlined in the [NEO white paper](https://docs.neo.org/docs/en-us/basic/whitepaper.html).
As the tech industry has seen play out many times, developers are critical to platform
adoption.

Developers desire two - somewhat contradictory - things: Capability and Productivity.

Capability in this context means the raw capabilities of the underlying platform.
Generally speaking, the more capabilities provided by a platform, the more powerful
solutions developers can build and the more business opportunity developers have.

To date, the NEO platform has provided decentralized management of digital assets
via blockchain and smart contract technology. NEO continues to innovate, adding
new capabilities such distributed decentralized object storage and internet
resource access.  These powerful capabilities provide an economic and technical
foundation for building next-generation Smart Economy systems.

On the other hand, developers need to be productive. They want their tools to help
them capitalize on market opportunities quickly. A developer's focus needs to be
on the solution they are building, not the platform they are building their
solution on.

NEO enables developer productivity in multiple ways. For example, NEO provides
libraries and smart contract compilers for multiple programming languages (C#,
Java, Python and JavaScript to name a few). This approach enables developers to
build solutions on NEO using a programming language that they already know.

This design note and others that follow in the NDX series will focus on delivering
tools, libraries and other assets that improve the productivity of developers
targeting the NEO platform.

## Developing for the Smart Economy

In order to build the tools, libraries and other assets that provide a world-class
developer experience, it is necessary to understand the architecture of typical systems
that are built on the NEO platform. While this is a large solution space with many
possible approaches, several key elements of architecture appear to be common
across solutions.

Programmable management of digital assets is a critical enabling feature of the
Smart Economy. The NEO white paper identifies blockchain technology with digital
identity and smart contracts as the critical platform pieces that the NEO platform
provides to applications for the Smart Economy.

### Decentralized NEO Blockchain Application Architecture

At it's core, the NEO blockchain is an open, decentralized, cryptographically
secure ledger of transactions. The blockchain runs on a disparate set of nodes,
generating ledger transactions that are grouped into "blocks". These transactions
specify digital asset ownership, are open for all to inspect and are impossible
to forge. Ledger transactions can be submitted from external sources or can be
programmatically generated by smart contracts.

Nodes in the blockchain network communicate using a full-duplex, peer-to-peer
[protocol](https://docs.neo.org/docs/en-us/tooldev/advanced/network-protocol.html)
running on top of TCP and/or WebSockets. This protocol is used by the
[consensus algorithm](https://docs.neo.org/docs/en-us/basic/technology/dbft.html)
to generate new blocks of transactions. It is also used to synchronize data
between nodes in the blockchain.

Nodes using the peer-to-peer protocol typically establish long-lived connections
to multiple other nodes in the blockchain. These long-lived connections allow for
efficient communication between nodes and for notifications about changes to the
system - for example, the creation of a new block - to be broadcast across the
entire network.

Nodes using this peer-to-peer protocol typically have a full copy of the
blockchain ledger locally. The data generated by the blockchain is non-trivial.
As of July 7th, 2019, the [MainNet offline synchronization package](https://sync.ngd.network/)
is 5.23 gigabytes. The size of this data will continue to grow, with the growth
accelerating as the NEO ecosystem scales.

Between the connection-oriented network protocol and the need to store large amounts
of blockchain data, it's reasonable to expect that most nodes in the blockchain
network would be dedicated machines that are always-on and always-connected.
This implies that the blockchain must provide a mechanism for end-points that are
not a part of blockchain network to interact with the blockchain without being
always connected or having a fully synchronized copy of the blockchain data.

The NEO blockchain provides such a mechanism. In addition to the connected,
full-duplex protocol used for inter-node communication, the NEO blockchain
provides a stateless [remote API interface](https://docs.neo.org/docs/en-us/reference/rpc/latest-version/api.html)
for programmatically accessing the blockchain and invoking deployed smart
contracts from end-points that aren't connected to the  blockchain network via
the protocol described above. This remote API interface uses
[JSON-RPC](https://www.jsonrpc.org/specification) running on top of HTTP.

> Note, some other blockchain ecosystems refer to end-points accessing the network
> via a remote API as "lite" nodes while end-points in the blockchain network are
> called "full" nodes.

### Unified Programming Model

Developers of any type of distributed system - decentralized or otherwise - must
decide where their application code will run. For example, in a traditional web
application, HTML is generated on the web server and rendered in the browser.
However, modern browsers can create DOM elements on the fly so HTML can be created
and rendered entirely in the browser. Web app developers have to weigh tradeoffs
such as network round trips duration, client device performance and programming
complexity when deciding where their HTML creation code should run.

Likewise, NEO blockchain app developers need to weigh similar tradeoffs when
deciding to run their code on an end-point connected to the blockchain via the
connected, full-duplex protocol versus the remote API interface. Furthermore, in
addition to code running on blockchain nodes or remote end-points, NEO blockchain
app developers can also deploy application code as smart contracts.

NEO blockchain applications typically span these different modes of development.
For example, the [NEO Exchange Developers Guide](https://docs.neo.org/docs/en-us/exchange/general.html)
recommends deploying a neo-cli node with a set of standard plugins. These plugins
provide additional behavior for nodes connected to the blockchain via the connected,
full-duplex protocol. In particular, this behavior exposes custom remote API
methods, enabling exchange end-points that are not a part of the NEO blockchain
to get asset balances and to transfer assets for the exchange customers.

This document proposes the following taxonomy to describe the different SDKs
that NEO blockchain applications can use:

- Code running on end-points that are connected to the blockchain network via the
  connected, full-duplex protocol and have a full copy of the blockchain data
  will be referred to in this document as using a **Node SDK**. The existing
  neo-cli plugin mechanism is an example of a **Node SDK**.
- Code running on end-points that are accessing the blockchain network via the
  remote API JSON-RPC interface will be referred to in this document as using a
  **Remote SDK**. [NeoModules](https://github.com/CityOfZion/NeoModules) is an
  example of a **Remote SDK**.
- Code running on blockchain nodes as part of smart contracts will be referred
  to in this document as using a **Contract SDK**.
  [Neo.SmartContract.Framework](https://github.com/neo-project/neo-devpack-dotnet/tree/cc5af48f63f5881710459415e817a90ae396934a/src/Neo.SmartContract.Framework)
  is an example of a  **Contract SDK**.

The development model for each SDK type needs to work together as a whole, rather
than as a set of loosely related frameworks and tools. It's not enough that the
Node, Remote and Contract SDKs support the same programming languages. Developers
need the ability to move code between SDKs easily. If each SDK has a unique
programming model, developer productivity will suffer.

![NEO-FX Layers](neofx-layers.png)

This unified programming model will provide a common set of fundamental types
(such as large unsigned integers for hash values and elliptic curves for
cryptography), domain models (such as blocks and transactions) and service
abstractions (such as retrieving a transaction or invoking a smart contract). By
using these common set of types across SDKs, developers will be able to move
their code between SDKs, ensuring they can run their code in the manner that
makes most sense for their blockchain application.

This unified programming model for NEO is called NEO-FX. Further specifics of
NEO-FX are addressed in design note NDX-DN02.

## Developer Scenarios

Note, as per this design note's abstract, details for each of the following
sections will be fleshed out in separate design notes. These sections are
intentionally high level and aspirational.

### Work With Existing Development Language Ecosystems

As per the official white paper, NEO is designed to integrate into existing
development language ecosystems. The goal of this approach is to enable developers
to build Smart Economy solutions while learning a minimum of new tools and languages.

In order for a given development language ecosystem to target the NEO blockchain
platform, a set of libraries, frameworks and tools need to be developed specific
to that ecosystem. As per the Unified Programming Model section above, these
assets need to be designed to enable developers to move code as freely as possible
across the different locations.

- For **Remote SDK** development, developers need libraries to securely manage
  user wallets and to invoke remote API functions. Most mainstream languages
  provide the core crypto and network capabilities needed to build these libraries.
- For **Node SDK** development, developers needs a framework that provides
  an implementation of the peer-to-peer network protocol as well as many of the
  core types such as block and transaction.
  - Note, this does not need to be a full consensus node implementation. A plugin
    base SDK or an extensible framework for building blockchain nodes is likely
    to be more useful to developers than a consensus node implementation.
- For **Contract SDK** development, developers need a compiler than can convert
  smart contracts written in their language of choice to NeoVM byte code.
  Additionally they need reference libraries for NeoVM capabilities for
  developers to code and compile against. Developers also need tools for
  testing and debugging their smart contracts.

The specifics of how NEO will work with the .NET development ecosystem is addressed
in design note NDX-DN05. Additional development ecosystems will be addressed in
future design notes.

### Make It Easy To Get Started

It must be easy for developers to acquire the tools and libraries they need
to build solutions on the NEO platform.

These days, most language ecosystems use a package management system for
distribution of tools and libraries. For example, [NuGet](https://www.nuget.org/)
is the package manager for .NET libraries, but it is also used for distributing
[custom templates](https://docs.microsoft.com/en-us/dotnet/core/tools/custom-templates)
as well as [global tools](https://docs.microsoft.com/en-us/dotnet/core/tools/global-tools).
Likewise, [npx](https://www.npmjs.com/package/npx) can execute scripts directly
from the [NPM](https://www.npmjs.com/) package repository and
[templates](https://www.npmjs.com/search?q=keywords:yeoman-generator) for the
[Yeoman](https://yeoman.io/) scaffolding tool are distributed via NPM.

Additionally, tools like Visual Studio Code and online services like GitHub are
extensible and work across multiple developer language ecosystems. Marketplaces
for [Visual Studio Code](https://marketplace.visualstudio.com/vscode) and
[GitHub](https://github.com/marketplace) provide a developer-friendly mechanism
for distributing custom extensions to these tools and services.

NEO's developer libraries and tools should be distributed using the existing
package management and tool marketplace options available for a given
development language ecosystem.

As an example, all of the libraries and most of the tools for .NET NEO development
should be distributed via NuGet. This includes the various libraries for on/off/in
chain development, custom templates for new NEO projects, the NEON compiler that
compiles managed DLLs to NeoVM byte code and the NEO Express development
blockchain (described in the next section). Extensions to existing developer IDEs
such as Visual Studio and Visual Studio Code would be distributed via their
respective marketplaces. A single "get started" web page would provide all links
for installing these various components.

The specifics of how .NET developers will acquire relevant NEO development assets
is addressed in design note NDX-DN05. Acquisition specifics for other development
ecosystems will be addressed in future design notes.

### A Blockchain Optimized Development and Testing

Today, NEO provides two official client applications for blockchain network
nodes: neo-cli and neo-gui. These clients can connect MainNet, TestNet or can
be used to run a private blockchain instance. These clients are used to
run consensus nodes and by real end users to transfer assets on the
MainNet. As such, neo-cli and neo-gui must be optimized for security and other
production usage scenarios.

NEO Express is a new NEO blockchain client application, optimized for development
scenarios. It will be built on the same NEO platform core as neo-cli and
neo-gui are, ensuring that developer's code will run the same on MainNet
as it does in their development environment. NEO Express will support multiple
deployment scenarios, from a single node blockchain running on a developer's
machine to a multi node blockchain shared by a development team.

NEO Express will have support for a variety of developer-only scenarios.

- Simple privatenet instance creation
- Password-free wallet and asset management (including genesis NEO)
- Simple smart contract deployment and invocation
- Blockchain fast-forward (for GAS creation) and rollback (for testing purposes)
- Blockchain import/export (for test and collaboration purposes)
- Privatenet instance management and blockchain explorer integrated into Visual
  Studio Code

NEO Express specifics are addressed in  design note NDX-DN03.

### Smart Contract Debugging and Testing

Mitch Denny [describes](https://mitchdenny.com/the-inner-loop/) the "inner loop"
as "the iterative process that a developer performs when they write, build and
debug code". These steps are typically performed in some type of integrated
development environment (aka IDE) like Visual Studio Code. The IDE provides a
source editing experience - often enhanced with auto complete and refactoring
services specific to the development language in use. Build tools - such as
Microsoft's C# compiler and NEO's NEON compiler - are typically command line
applications, but the IDE provide a mechanism to launch these tools from the
user interface. That leaves debugging (and testing) as the final aspect of the
inner loop that needs to be addressed for NEO developers.

The NEO smart contract debugger will implement Microsoft's
[Debug Adapter Protocol](https://microsoft.github.io/debug-adapter-protocol/),
enabling it to be easily integrated into a variety of existing IDEs, including
Visual Studio and Visual Studio Code. As NEO supports building smart contracts
in a variety of languages, the NEO Debug Adapter will need to be extensible in
order for it to support a variety of smart contract languages.

In order to provide test and debug repeatability, developers need the ability to
manage the blockchain state precisely. As stated in a previous section, NEO
Express will support developer scenarios related to state management such as roll
back and import/export. Additionally, the NEO smart contract debugger will support
an isolated mode where the blockchain related services such as transaction
access and contract storage will be emulated. This isolated NeoVM instance will
work with both with the smart contract debugger as well as the NEO test
infrastructure.

Specifics of smart contract debugging and testing are addressed in design note NDX-DN04.

### Manage the Blockchain Application Life Cycle

Modern application development - blockchain or otherwise - has increasingly
adopted a more operational practice. Typically, a "DevOps" based life cycle
this starts with automated build and deployment of application assets and flows
through to telemetry collection that drives future development decisions.

Examples of DevOps capabilities needed for NEO blockchain applications:

- Continuous Integration/Delivery of NEO smart contracts
- Application Performance Management for NEO blockchain applications across all
  three taxonomy aspects (on/off/in chain)
- Decentralized application logging and telemetry

Blockchain application DevOps specifics will be addressed in a future design note.

### Grow the Blockchain Development Community with Guidance

Estimates suggest the mainstream developer community is at least two orders of
magnitude larger than the blockchain developer community. Growing the NEO development
community will require reaching out to developers without a background in blockchain
application development.

Much of NEO's documentation to date is white papers and reference documentation.
Mainstream developer without blockchain experience will need more scenario focused
guidance to help them understand how blockchain in general and NEO in particular
fits into their existing developer toolbox. Additionally, these developers will need
guidance detailing how NEO's intrinsic economic model effects both technical system
design as well organization and funding of system development itself.

Blockchain application guidance specifics will be addressed in a future design note.
